// parameters --
// number of tokens: 100
// number of agents: 10
// number of consumptions: 1

agents(10).
tokens(100).
token_value(1).

!init.

+!init : agents(W) && tokens(T) && token_value(V) =>
    #print("start at: ");
    #println(#System.currentTimeMillis());
    +not_done(T);
    for(I in between(1,T,I)) {
          J = #std.math.round(I * ( W / T ));
          #achieve("thread"+J,token(V));
        }
   .

@atomic
+!done : not_done(T) =>
    if(T == 1) {
        #print("done at: ");
        #println(#System.currentTimeMillis());
        #std.coms.exit();
    };
    -not_done(T);
    +not_done(T - 1)
.

